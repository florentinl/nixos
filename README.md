# My very small NixOS configuration

Here's my NixOS configuration with very simple defaults:
- Gnome
- Secure boot with Lanzaboote (v0.3.0)
- Disk Encryption
- Stable Nixos
- unfree software
- garbage collection
- single user
- zsh shell by default
- etc...


## Add a new system

- Install NixOS Gnome stable using the ISO on the website:
    - Enable Disk encryption with passphrase
    - Add encrypted swap partition with hibernation checked
    - Enable unfree software / drivers
- Move /etc/nixos to a backup dir
- Clone this repo in /etc/nixos
- Create a file for the new device taking inspiration from an existing system and the autogenerated hardware-config.nix and configuration.nix
- Comment out Lanzaboote for now
- rebuild + reboot + test -> should work
- Enable secure boot:
  - follow Lanzaboote quick start guide
- Unlock Luks volumes when secure boot is validated:
  for each luks partition:
    - sudo systemd-cryptenroll /dev/$DISK --tpm2-device=auto --tpm2-pcrs=0+7 <- Ok I don't really know which registers matter -> But It looks like it does something right ?
- reboot -> boom should work without asking password
